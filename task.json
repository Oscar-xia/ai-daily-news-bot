{
  "project": "AI Daily News Bot",
  "description": "AI + 投资 + Web3 每日早报自动生成系统",
  "tasks": [
    {
      "id": 1,
      "title": "项目基础配置",
      "description": "创建项目结构和基础配置文件",
      "steps": [
        "创建项目目录结构 (app/, scripts/, data/, output/)",
        "创建 requirements.txt (fastapi, uvicorn, feedparser, httpx, apscheduler, sqlalchemy, pydantic, python-dotenv)",
        "创建 .env.example 环境变量模板",
        "创建 app/config.py 配置管理模块",
        "创建 app/database.py 数据库连接模块"
      ],
      "passes": true
    },
    {
      "id": 2,
      "title": "数据模型定义",
      "description": "创建 SQLAlchemy 数据模型和 Pydantic Schema",
      "steps": [
        "创建 app/models/schemas.py",
        "定义 Source 模型 (信息源)",
        "定义 RawItem 模型 (原始信息)",
        "定义 ProcessedItem 模型 (处理后信息)",
        "定义 Report 模型 (早报)",
        "定义 ReportItem 模型 (早报内容关联)",
        "创建 Pydantic Schema 用于 API 响应"
      ],
      "passes": true
    },
    {
      "id": 3,
      "title": "数据库初始化",
      "description": "创建数据库表和初始数据",
      "steps": [
        "创建 scripts/init_db.py 数据库初始化脚本",
        "创建所有数据表",
        "插入默认 RSS 信息源配置",
        "测试数据库连接和基本 CRUD 操作"
      ],
      "passes": true
    },
    {
      "id": 4,
      "title": "LLM 基础封装",
      "description": "封装 LLM API 调用",
      "steps": [
        "创建 app/llm/base.py LLM 基类",
        "实现 OpenAI 兼容 API 调用 (支持 OpenAI/智谱/通义)",
        "实现错误处理和重试逻辑",
        "添加请求/响应日志"
      ],
      "passes": true
    },
    {
      "id": 5,
      "title": "Prompt 模板",
      "description": "创建所有 LLM Prompt 模板",
      "steps": [
        "创建 app/llm/prompts.py",
        "实现初筛 Prompt 模板",
        "实现摘要生成 Prompt 模板",
        "实现关键词提取 Prompt 模板",
        "实现打分 Prompt 模板",
        "实现早报生成 Prompt 模板"
      ],
      "passes": true
    },
    {
      "id": 6,
      "title": "RSS 采集器",
      "description": "实现 RSS 订阅采集功能",
      "steps": [
        "创建 app/collectors/base.py 采集器基类",
        "创建 app/collectors/rss_collector.py",
        "使用 feedparser 解析 RSS",
        "实现错误处理和超时控制",
        "将采集结果存入 raw_items 表"
      ],
      "passes": true
    },
    {
      "id": 7,
      "title": "Twitter 采集器",
      "description": "实现 Twitter 关注列表采集",
      "steps": [
        "创建 app/collectors/twitter_collector.py",
        "实现 RSSHub 调用 (通过 RSS 接口获取 Twitter)",
        "支持配置多个 Twitter 用户",
        "处理 Twitter 特有的数据格式",
        "将采集结果存入 raw_items 表"
      ],
      "passes": true
    },
    {
      "id": 8,
      "title": "AI 搜索采集器",
      "description": "实现 Tavily/Exa 搜索采集",
      "steps": [
        "创建 app/collectors/search_collector.py",
        "实现 Tavily API 调用",
        "支持多个搜索关键词",
        "将搜索结果标准化并存入 raw_items 表"
      ],
      "passes": true
    },
    {
      "id": 9,
      "title": "去重模块",
      "description": "实现信息去重功能",
      "steps": [
        "创建 app/processors/deduplicator.py",
        "实现 URL 去重",
        "实现标题相似度去重 (可选: 使用 embedding)",
        "标记重复项 is_duplicate=True"
      ],
      "passes": true
    },
    {
      "id": 10,
      "title": "AI 初筛模块",
      "description": "实现 AI 相关性筛选",
      "steps": [
        "创建 app/processors/filter.py",
        "调用 LLM 判断内容相关性",
        "剔除无关内容 (更新 status=discarded)",
        "记录筛选结果"
      ],
      "passes": false
    },
    {
      "id": 11,
      "title": "摘要生成模块",
      "description": "实现 AI 摘要生成",
      "steps": [
        "创建 app/processors/summarizer.py",
        "调用 LLM 生成摘要",
        "将摘要存入 processed_items 表",
        "控制摘要长度 (100字以内)"
      ],
      "passes": false
    },
    {
      "id": 12,
      "title": "关键词提取模块",
      "description": "实现关键词提取和分类",
      "steps": [
        "创建 app/processors/classifier.py",
        "调用 LLM 提取 3-5 个关键词",
        "自动分类 (AI/投资/Web3)",
        "将关键词存入 processed_items 表"
      ],
      "passes": false
    },
    {
      "id": 13,
      "title": "打分模块",
      "description": "实现 AI 打分功能",
      "steps": [
        "创建 app/processors/scorer.py",
        "调用 LLM 对新闻打分 (0-100)",
        "将分数存入 processed_items 表",
        "支持按分数排序"
      ],
      "passes": false
    },
    {
      "id": 14,
      "title": "历史去重模块",
      "description": "实现与历史早报的去重",
      "steps": [
        "在 app/processors/deduplicator.py 中添加历史去重",
        "与 72 小时内已发布内容比对",
        "排除已报道过的新闻"
      ],
      "passes": false
    },
    {
      "id": 15,
      "title": "早报生成器",
      "description": "实现 Markdown 早报生成",
      "steps": [
        "创建 app/generators/report_generator.py",
        "按分类组织内容 (AI技术/投资/Web3)",
        "调用 LLM 生成标题和正文",
        "生成 Markdown 格式输出",
        "保存到 reports 表和 output/ 目录"
      ],
      "passes": false
    },
    {
      "id": 16,
      "title": "采集脚本",
      "description": "创建手动采集脚本",
      "steps": [
        "创建 scripts/run_collector.py",
        "支持指定采集源类型 (rss/twitter/search/all)",
        "支持指定信息源 ID",
        "输出采集统计信息"
      ],
      "passes": false
    },
    {
      "id": 17,
      "title": "处理脚本",
      "description": "创建 AI 处理脚本",
      "steps": [
        "创建 scripts/run_processor.py",
        "拉取 pending 状态的 raw_items",
        "依次执行: 去重 → 初筛 → 摘要 → 关键词 → 打分",
        "输出处理统计信息"
      ],
      "passes": false
    },
    {
      "id": 18,
      "title": "生成脚本",
      "description": "创建早报生成脚本",
      "steps": [
        "创建 scripts/run_generator.py",
        "支持指定日期",
        "支持指定最低分数阈值",
        "生成 Markdown 文件到 output/reports/"
      ],
      "passes": false
    },
    {
      "id": 19,
      "title": "定时调度器",
      "description": "实现定时任务调度",
      "steps": [
        "创建 app/scheduler.py",
        "使用 APScheduler 配置定时任务",
        "每 2 小时执行采集",
        "每天 6:00 生成早报",
        "添加错误处理和告警"
      ],
      "passes": false
    },
    {
      "id": 20,
      "title": "FastAPI 主入口",
      "description": "创建 FastAPI 应用",
      "steps": [
        "创建 app/main.py",
        "配置 CORS",
        "添加健康检查端点 /health",
        "集成调度器 (可选)"
      ],
      "passes": false
    },
    {
      "id": 21,
      "title": "信息源管理 API",
      "description": "实现信息源 CRUD API",
      "steps": [
        "GET /api/sources - 获取信息源列表",
        "POST /api/sources - 添加信息源",
        "PATCH /api/sources/:id - 更新信息源",
        "DELETE /api/sources/:id - 删除信息源"
      ],
      "passes": false
    },
    {
      "id": 22,
      "title": "信息管理 API",
      "description": "实现信息查询和审核 API",
      "steps": [
        "GET /api/items - 获取信息列表 (支持筛选)",
        "GET /api/items/:id - 获取单条信息详情",
        "POST /api/items/:id/approve - 批准信息",
        "POST /api/items/:id/reject - 拒绝信息"
      ],
      "passes": false
    },
    {
      "id": 23,
      "title": "早报管理 API",
      "description": "实现早报查询和生成 API",
      "steps": [
        "GET /api/reports - 获取早报列表",
        "GET /api/reports/:date - 获取指定日期早报",
        "POST /api/reports/generate - 手动生成早报",
        "POST /api/collect - 手动触发采集"
      ],
      "passes": false
    },
    {
      "id": 24,
      "title": "手动提交功能",
      "description": "实现手动添加新闻功能",
      "steps": [
        "POST /api/items - 手动添加新闻",
        "支持直接提交已处理好的内容",
        "跳过 AI 处理流程"
      ],
      "passes": false
    },
    {
      "id": 25,
      "title": "CLI 工具",
      "description": "创建命令行管理工具",
      "steps": [
        "创建 scripts/cli.py",
        "实现信息源管理命令 (add-source, list-sources)",
        "实现采集命令",
        "实现处理命令",
        "实现生成命令",
        "使用 argparse 或 click"
      ],
      "passes": false
    },
    {
      "id": 26,
      "title": "日志系统",
      "description": "完善日志记录",
      "steps": [
        "配置 Python logging",
        "按模块记录日志",
        "支持日志文件输出",
        "添加请求 ID 追踪"
      ],
      "passes": false
    },
    {
      "id": 27,
      "title": "错误处理",
      "description": "完善错误处理和边界情况",
      "steps": [
        "添加 API 错误统一响应格式",
        "处理 LLM API 超时和错误",
        "处理 RSS 解析错误",
        "添加重试机制"
      ],
      "passes": false
    },
    {
      "id": 28,
      "title": "单元测试",
      "description": "编写核心模块单元测试",
      "steps": [
        "创建 tests/ 目录结构",
        "测试 RSS 采集器",
        "测试去重模块",
        "测试 LLM 调用 (mock)",
        "测试早报生成器"
      ],
      "passes": false
    },
    {
      "id": 29,
      "title": "完整流程测试",
      "description": "测试完整早报生成流程",
      "steps": [
        "运行 init_db 初始化数据库",
        "运行 collect 采集信息",
        "运行 process AI 处理",
        "手动审核几条信息",
        "运行 generate 生成早报",
        "检查输出 Markdown 文件"
      ],
      "passes": false
    },
    {
      "id": 30,
      "title": "文档和部署",
      "description": "完善文档和部署配置",
      "steps": [
        "编写 README.md",
        "编写使用说明",
        "创建 Dockerfile (可选)",
        "创建 docker-compose.yml (可选)",
        "配置生产环境变量"
      ],
      "passes": false
    }
  ]
}
